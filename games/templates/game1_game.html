<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Space Game</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
          
            background-color: lightgrey;
        }

        .playscreen {
            position:absolute; /* Important */
            width: 100%;
            height: 80%;
            top: 0px;
            left: 0px;
            background-color: #FF0000;
          
        }

        .panel{
            position:fixed;
            width:100%;
            height:20%;
            background-color: beige;
            border:2px groove;
            top:80%;
            left: 0;
        }

        #ship {
            position: fixed; /* Important */
            width: 50px;
            height: 50px;
            background-color: white; /* Circular shape */
            border-radius: 50%;
            left: 420px;
            top: 20px;
        }
    </style>
</head>
<body>

    <div class="playscreen" >
        <div id="ship"></div>
    </div>
    
    <div class="panel"> 
        <!--    Reverse URL Lookup-->
    <a href="{% url 'home'%}" style="font-size: 2rem;margin-top: 50px; display: block">
        Home Screen
    </a>
    </div>


    <!-- JS Logic -->
    <script>

        // Using eventListener to detect if a KEY is PRESSED
        document.addEventListener('mousedown', (event) => {
      // Get the mouse position relative to the viewport

      ship = document.getElementById('ship')
      ship.style.left = '220px'
      ship.style.top = '220px'
      console.log(ship.style)
      if(event.button === 0)
      {
      ship = document.getElementById('ship')
      // let ship = document.getElementsByClassName('ship')[0];
      
       // console.log(ship.style)
       //get mouse x y
        const target_x = event.clientX;
        const target_y = event.clientY;

        //get ship x y
        const x_pos = Number(ship.style.left.slice(0,-2))
        const y_pos = Number(ship.style.top.slice(0,-2))

        //get the difference
        const x_difference = target_x - x_pos
        const y_difference = target_y - y_pos

        const tan = Math.tan(y_difference, x_difference) 
        const angle = Math.atan(tan) * 180 / Math.PI

        //calculate the change needed to move the coordinate in x & y direction
        const x_move = Math.cos(angle)*10
        const y_move = Math.sin(angle)*10
        console.log(target_x, x_pos)
        console.log(angle, x_move, y_move)


        //update ship position
        //ship.style.left = (x_move + x_pos).toString() + 'px';
       // ship.style.top = (y_move + y_pos).toString() + 'px';


    }
    });
    </script>


</body>
</html>
